Frequently Asked Questions
---------------------------


**CulebrONT report does not show Quast results**

- To observe results on CulebrONT final report you have to transfer the whole of repertory. ``FINAL_RESULTS`` contains QUAST directory and also the ``snakemake-report.htlm`` who is generated by snakemake argument --report.

**Error validating model from --model argument**

- This error is obtained if you are not bind your singularity. It's necessary to launch snakemake command line by using ``--singularity-args '--bind $HOME'``  arguments.

**How much space does it take to install the CulebrONT dependances?**

- build_conda_envs takes 2.1G and build singularity about 4.9G (medaka-gpu-1.2.simg takes 2.1G)

**Recomendated Snakemake command line to launch culebrONT**

.. code-block:: bash

    snakemake --nolock --use-conda --use-singularity --singularity-args '--bind $HOME' --cores -p -s Snakefile --latency-wait 6000000 --keep-going --restart-times 0 --rerun-incomplete --configfile config.yaml --conda-prefix $PWD/build_conda_envs


- Snakemake compiles in each output directory conda enviroments. To avoid this, please use ``--conda-prefix /path/to/build_conda_env`` on snakemake command line. This could be practical on HPC cluster install.

- Bind mount disks to singularity environment by using ``--singularity-args '--bind $HOME'``. This allows to detect others disks on the singularity container.

**The conda command is not available in the shell /bin/bash that will be used by Snakemake**

Please check conda installation. On i-Trop cluster you can add it on sbatch script. you have to adapt it to your favorite cluster.

.. code-block:: bash

    module load system/Miniconda3/1.0

    env=/home/$(whoami)/.conda/envs/snakemake
    [ ! -d $env ] && echo -e "## [$(date) - culebrONT]\t Creating conda environment for snakemake" && conda env create -f envs/environment.yaml -n snakemake

    source activate snakemake
