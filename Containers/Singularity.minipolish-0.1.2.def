BootStrap: docker
From: ubuntu:18.04
%labels
Maintainer Ndomassi Tando - IRD Itrop Cluster, DIADE Unit
base.image="ubuntu:18.04"
version="1"
software="minipolish"
software.version="0.1.2"

%help
URL: https://github.com/rrwick/Minipolish
Description: A tool for Racon polishing of miniasm assemblies.
Usage: singularity run $PATH_TO_CONTAINER/minipolish-0.1.2.simg + arguments

%environment
export PATH="/usr/local/miniconda/miniconda3/bin:$PATH"
export CONDARC="/.condarc"
export LC_ALL=C

%post
apt-get update
apt update && apt install -y git curl wget less locate build-essential openssh-server
mkdir /usr/local/miniconda && cd /usr/local/miniconda
wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
chmod +x Miniconda3-latest-Linux-x86_64.sh 
./Miniconda3-latest-Linux-x86_64.sh -b -p /usr/local/miniconda/miniconda3
cd /usr/local/miniconda/miniconda3/bin
export PATH="/usr/local/miniconda/miniconda3/bin:$PATH" >> $SINGULARITY_ENVIRONMENT
conda config --add channels defaults
conda config --add channels bioconda
conda config --add channels conda-forge
conda install -c bioconda minipolish

%runscript
exec minipolish "$@"
