BootStrap: docker
From: ubuntu:18.04

%labels
Maintainer Ndomassi Tando - IRD Itrop Cluster, DIADE Unit
base.image="ubuntu:18.04"
version="1"
software="canu"
software.version="1.9"

%help
URL: https://github.com/marbl/canu
Description: A single molecule sequence assembler for genomes large and small.
Launch the command: singularity run canu-1.9.simg + arguments to use shasta 

%environment
export PATH=$PATH:/usr/local/canu-1.9/Linux-amd64/bin

%post
apt-get -y update
apt-get install -y build-essential wget gcc zlib1g-dev
apt-get -y install openjdk-8-jdk openjdk-8-jre

cat >> /etc/environment <<EOL
JAVA_HOME= /usr/lib/jvm/java-8-openjdk-amd64
JRE_HOME=/usr/lib/jvm/java-8-openjdk-amd64/jre
EOL

cd /usr/local
wget https://github.com/marbl/canu/archive/v1.9.tar.gz
tar xvfz v1.9.tar.gz
cd canu-1.9/src
make -j 8
#%runscript
#exec /usr/local/canu-1.9/Linux-amd64/bin/canu "$@"

